<!doctype html>
<html lang="ro" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4253419731329045"
        crossorigin="anonymous"></script>

    <link rel="canonical" th:href="${canonicalUrl}" />
    <link rel="icon" type="image/png" href="/nume-aplicatie/images/favicon.png">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7Q2536ZKL2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        window.gtag = function () { dataLayer.push(arguments); };
        gtag('consent', 'default', {
            'wait_for_update': 500,
            'region': ['RO'],
            'ad_storage': 'denied',
            'analytics_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied'
        });
        gtag('js', new Date());
        gtag('config', 'G-7Q2536ZKL2');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${lesson.title}">Lesson</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <style>
        body {
            background: #ffffff;
        }
    </style>
</head>

<body th:with="activeTopic='C-sharp', activeChapter='10.Colectii', activeLesson='1.Lista List_T_'">
    <button class="mobile-sidebar-toggle" onclick="toggleMobileSidebar()">☰</button>
    <div th:replace="~{fragments/nav :: nav}"></div>
    <div class="top-nav">
        <th:block th:each="topic : ${topics}">
            <a th:href="@{'/lectii/topic/' + ${topic.id}}" th:text="${topic.name}"
                th:classappend="${topic.id} == ${activeTopicId} ? 'active' : ''"> </a>
        </th:block>
    </div>
    <div class="layout">
        <div class="mobile-sidebar" id="mobileSidebar">
            <button class="close-btn" onclick="toggleSidebar()">✖</button>
            <ul class="chapter-list">
                <th:block th:each="chapter : ${chapters}">
                    <li class="chapter-item" th:classappend="${chapter.id} == ${activeChapterId} ? 'open' : ''">
                        <div class="chapter-title" onclick="toggleChapter(this)">
                            <strong th:text="${chapter.title}"></strong> <span class="arrow">▼</span>
                        </div>
                        <ul class="lesson-list">
                            <th:block th:each="lesson : ${chapter.lessons}">
                                <li><a th:href="@{'/lectii/' +
${#strings.toLowerCase(#strings.replace(chapter.topic.name, ' ', '-'))} + '/' +
${#strings.toLowerCase(#strings.replace(chapter.title, ' ', '-'))} + '/' +
${#strings.toLowerCase(#strings.replace(lesson.title, ' ', '-'))} }" th:text="${lesson.title}"
                                        th:classappend="${lesson.id} == ${activeLessonId} ? 'active' : ''"> </a></li>
                            </th:block>
                        </ul>
                    </li>
                </th:block>
            </ul>
        </div>
        <aside class="sidebar">
            <ul class="sidebar-list">
                <th:block th:each="chapter : ${chapters}">
                    <li class="chapter-item" th:classappend="${chapter.id} == ${activeChapterId} ? 'open' : ''">
                        <div class="chapter-toggle" onclick="toggleLessons(this)">
                            <span th:text="${chapter.title}">Chapter</span>
                        </div>
                        <ul class="lesson-list hidden">
                            <th:block th:each="lesson : ${chapter.lessons}">
                                <li><a th:href="@{'/lectii/' +
${#strings.toLowerCase(#strings.replace(chapter.topic.name, ' ', '-'))} + '/' +
${#strings.toLowerCase(#strings.replace(chapter.title, ' ', '-'))} + '/' +
${#strings.toLowerCase(#strings.replace(lesson.title, ' ', '-'))} }" th:text="${lesson.title}"
                                        th:classappend="${lesson.id} == ${activeLessonId} ? 'active' : ''"> </a></li>
                            </th:block>
                        </ul>
                    </li>
                </th:block>
            </ul>
        </aside>
        <main class="content">
            <div class="document-container">

<h1 class="main-title">Programarea paralelă - Gorutine</h1>
<h2 class="subtitle">Gorutine</h2>
<p class="paragraph">Gorutinele (goroutines) reprezintă operațiuni paralele care pot fi executate independent de funcția în care au fost lansate. Caracteristica principală a gorutinelor este că ele pot fi executate paralel. Așadar, pe arhitecturi multi-core, există posibilitatea de a rula gorutinele pe nuclee diferite ale procesorului, astfel încât gorutinele vor fi executate paralel și programul se va încheia mai rapid.</p>
<p class="paragraph">Fiecare gorutină reprezintă, de obicei, un apel de funcție și execută secvențial toate instrucțiunile sale. Când lansăm un program în Go, deja lucrăm cu cel puțin o gorutină, reprezentată de funcția main. Această funcție execută secvențial toate instrucțiunile care sunt definite în interiorul său.</p>
<p class="paragraph">Pentru a defini gorutine se utilizează operatorul go, care se pune înaintea apelului funcției:</p>
<div class="code-inline"><pre><code>go&nbsp;apel_functie</code></pre></div>
<p class="paragraph">De exemplu, să definim mai multe gorutine care calculează factorialul unui număr:</p>
<div class="code-inline"><pre><code>package&nbsp;main<br>import&nbsp;&quot;fmt&quot;<br>&nbsp;<br>func&nbsp;main()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;1;&nbsp;i&nbsp;&lt;&nbsp;7;&nbsp;i++{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go&nbsp;factorial(i)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&quot;The&nbsp;End&quot;)<br>}<br>&nbsp;<br>func&nbsp;factorial(n&nbsp;int){<br>&nbsp;&nbsp;&nbsp;&nbsp;if(n&nbsp;&lt;&nbsp;1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&quot;Număr&nbsp;invalid&quot;)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;:=&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;1;&nbsp;i&nbsp;&lt;=&nbsp;n;&nbsp;i++{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;*=&nbsp;i<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(n,&nbsp;&quot;-&quot;,&nbsp;result)<br>}</code></pre></div>
<p class="paragraph">În ciclul for, sunt lansate succesiv șase gorutine prin apelul go factorial(i). Adică, practic, acesta este un apel obișnuit de funcție cu operatorul go.</p>
<p class="paragraph">Totuși, în loc de șase factoriale pe consolă, la apelarea programului putem vedea doar linia &quot;The End&quot;:</p>
<div class="code-inline"><pre><code>The&nbsp;End</code></pre></div>
<p class="paragraph">„Putem vedea” înseamnă că comportamentul programului în acest caz este nedeterministic. De exemplu, ieșirea poate arăta și astfel:</p>
<div class="code-inline"><pre><code>2&nbsp;-&nbsp;2<br>1&nbsp;-&nbsp;1<br>4&nbsp;-&nbsp;24<br>The&nbsp;End<br>5&nbsp;-&nbsp;120</code></pre></div>
<p class="paragraph">De ce se întâmplă acest lucru? După apelul go factorial(i), funcția main lansează o gorutină care începe să ruleze în contextul său, independent de funcția main. Practic, main și factorial rulează paralel. Totuși, gorutina principală este apelul funcției main. Și dacă execuția acestei funcții se încheie, atunci întreaga aplicație se încheie.</p>
<p class="paragraph">Deoarece apelurile funcției factorial sunt gorutine, funcția main nu așteaptă finalizarea acestora și continuă să ruleze după ce le lansează. Unele gorutine pot termina înaintea funcției main, iar prin urmare, vom putea vedea rezultatele acestora pe consolă.</p>
<p class="paragraph">Dar poate apărea situația în care funcția main se termină înainte ca apelurile funcției factorial să fie completate. De aceea, este posibil să nu vedem pe consolă factorialele numerelor.</p>
<p class="paragraph">Pentru a vedea totuși rezultatul execuției gorutinelor, să punem un apel al funcției fmt.Scanln() la sfârșitul funcției main, care va aștepta input de la utilizator din consolă:</p>
<div class="code-inline"><pre><code>package&nbsp;main<br>import&nbsp;&quot;fmt&quot;<br>&nbsp;<br>func&nbsp;main()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;1;&nbsp;i&nbsp;&lt;&nbsp;7;&nbsp;i++{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go&nbsp;factorial(i)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Scanln()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;așteptăm&nbsp;input&nbsp;din&nbsp;partea&nbsp;utilizatorului<br>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&quot;The&nbsp;End&quot;)<br>}<br>&nbsp;<br>func&nbsp;factorial(n&nbsp;int){<br>&nbsp;&nbsp;&nbsp;&nbsp;if(n&nbsp;&lt;&nbsp;1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&quot;Număr&nbsp;invalid&quot;)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;:=&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;1;&nbsp;i&nbsp;&lt;=&nbsp;n;&nbsp;i++{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;*=&nbsp;i<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(n,&nbsp;&quot;-&quot;,&nbsp;result)<br>}</code></pre></div>
<p class="paragraph">Acum vom putea vedea rezultatele tuturor apelurilor funcției factorial:</p>
<div class="code-inline"><pre><code>1&nbsp;-&nbsp;1<br>3&nbsp;-&nbsp;6<br>5&nbsp;-&nbsp;120<br>4&nbsp;-&nbsp;24<br>2&nbsp;-&nbsp;2<br>6&nbsp;-&nbsp;720<br>The&nbsp;End</code></pre></div>
<p class="paragraph">Este important de menționat că, deoarece fiecare gorutină este lansată în propriul său context și se execută independent și paralel față de celelalte gorutine, nu putem determina cu exactitate care gorutină se va termina prima. De exemplu, gorutina go factorial(2) este lansată înaintea go factorial(5), dar poate termina mai târziu.</p>
<p class="paragraph">Gorutinele pot reprezenta și apeluri ale funcțiilor anonime:</p>
<div class="code-inline"><pre><code>package&nbsp;main<br>import&nbsp;&quot;fmt&quot;<br>&nbsp;<br>func&nbsp;main()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;1;&nbsp;i&nbsp;&lt;&nbsp;7;&nbsp;i++{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go&nbsp;func(n&nbsp;int){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;:=&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;:=&nbsp;1;&nbsp;j&nbsp;&lt;=&nbsp;n;&nbsp;j++{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;*=&nbsp;j<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(n,&nbsp;&quot;-&quot;,&nbsp;result)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}(i)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Scanln()<br>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&quot;The&nbsp;End&quot;)<br>}</code></pre></div>
            </div>
        </main>
        <aside class="ad-section">
            <div class="ad-box">
                <p>Google Ad Here</p>
            </div>
            <div class="ad-box">
                <p>Promo: SQL Beginner Guide</p>
            </div>
        </aside>
    </div>
    <div class="lesson-navigation">
        <th:block th:if="${previousLesson != null}">
            <a th:href="@{'/lectii/' +
            ${#strings.toLowerCase(#strings.replace(previousLesson.chapter.topic.name, ' ', '-'))} + '/' +
            ${#strings.toLowerCase(#strings.replace(previousLesson.chapter.title, ' ', '-'))} + '/' +
            ${#strings.toLowerCase(#strings.replace(previousLesson.title, ' ', '-'))} }" class="nav-button">← Lecția
                anterioară</a>
        </th:block>
        <th:block th:if="${nextLesson != null}">
            <a th:href="@{'/lectii/' +
            ${#strings.toLowerCase(#strings.replace(nextLesson.chapter.topic.name, ' ', '-'))} + '/' +
            ${#strings.toLowerCase(#strings.replace(nextLesson.chapter.title, ' ', '-'))} + '/' +
            ${#strings.toLowerCase(#strings.replace(nextLesson.title, ' ', '-'))} }" class="nav-button">Lecția
                următoare →</a>
        </th:block>
    </div>
    <div th:replace="~{fragments/footer :: footer}"></div>
    <script th:src="@{/js/script.js}" defer></script>
</body>
</html>
