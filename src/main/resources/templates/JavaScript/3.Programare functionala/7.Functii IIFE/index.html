<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${lesson.title}">Lesson</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <style>body { background: #ffffff; }</style>
</head>
<body>
<button class="mobile-sidebar-toggle" onclick="toggleMobileSidebar()">☰</button>
<nav class="nav">
  <div class="logo"><a th:href="@{/}"><img th:src="@{/images/logo.png}" alt="Logo" class="logo-img"></a></div>
  <div class="menu"><a th:href="@{/}">Home</a><a href="javascript:void(0)" onclick="openPopup()">Donează</a></div>
  <div class="hamburger" onclick="document.querySelector('.menu').classList.toggle('active')">
    <div class="hamburger-line"></div><div class="hamburger-line"></div><div class="hamburger-line"></div>
  </div>
</nav>
<div class="top-nav">
  <th:block th:each="topic : ${topics}">
    <a th:href="@{'/topics/' + ${topic.id}}" th:text="${topic.name}">Topic</a>
  </th:block>
</div>
<div class="layout">
  <div class="mobile-sidebar" id="mobileSidebar">
    <button class="close-btn" onclick="toggleSidebar()">✖</button>
    <ul class="chapter-list">
      <th:block th:each="chapter : ${chapters}">
        <li class="chapter-item">
          <div class="chapter-title" onclick="toggleChapter(this)">
            <strong th:text="${chapter.title}"></strong><span class="arrow">▼</span>
          </div>
          <ul class="lesson-list">
            <th:block th:each="lesson : ${chapter.lessons}">
              <li>
                <a th:href="@{'/lessons/' +
                ${#strings.toLowerCase(#strings.replace(chapter.topic.name, ' ', '-'))} + '/' +
                ${#strings.toLowerCase(#strings.replace(chapter.title, ' ', '-'))} + '/' +
                ${#strings.toLowerCase(#strings.replace(lesson.title, ' ', '-'))} }"
                   th:text="${lesson.title}"></a>
              </li>
            </th:block>
          </ul>
        </li>
      </th:block>
    </ul>
  </div>
  <aside class="sidebar">
    <ul class="sidebar-list">
      <th:block th:each="chapter : ${chapters}">
        <li class="chapter-item">
          <div class="chapter-toggle" onclick="toggleLessons(this)">
            <span th:text="${chapter.title}">Chapter</span>
          </div>
          <ul class="lesson-list hidden">
            <th:block th:each="lesson : ${chapter.lessons}">
              <li class="lesson-item">
                <a th:href="@{'/lessons/' +
                ${#strings.toLowerCase(#strings.replace(chapter.topic.name, ' ', '-'))} + '/' +
                ${#strings.toLowerCase(#strings.replace(chapter.title, ' ', '-'))} + '/' +
                ${#strings.toLowerCase(#strings.replace(lesson.title, ' ', '-'))} }"
                   th:text="${lesson.title}">Lesson</a>
              </li>
            </th:block>
          </ul>
        </li>
      </th:block>
    </ul>
  </aside>
  <main class="content">
    <div class="document-container">
 <h1 class="main-title">Funcții IIFE</h1>
 <h2 class="subtitle">Funcții autoapelative</h2>
 <p class="paragraph">De obicei, definiția unei funcții este separată de apelul său: mai întâi definim funcția, apoi o apelăm. Totuși, acest lucru nu este obligatoriu. Putem de asemenea să creăm funcții care să fie apelate imediat la definirea lor. Aceste funcții sunt cunoscute și sub numele de Immediately Invoked Function Expression sau IIFE. Asemenea funcții sunt închise în paranteze, iar după definiția funcției urmează în paranteze transmiterea parametrilor:</p>
 <div class="code-inline">
  <pre><code>//&nbsp;funcție&nbsp;autoapelativă<br>(function(){<br>&nbsp;&nbsp;&nbsp;console.log("Salut&nbsp;lume");<br>}());</code></pre>
 </div>
 <p class="paragraph">Aici, acest mic program poate fi împărțit în câteva părți. În paranteze este definită o funcție anonimă:</p>
 <div class="code-inline">
  <pre><code>function(){<br>&nbsp;&nbsp;&nbsp;console.log("Salut&nbsp;lume");<br>}</code></pre>
 </div>
 <p class="paragraph">Aceasta este o funcție obișnuită care afișează un anumit șir de caractere. Dar, de asemenea, în paranteze după definiția funcției urmează niște paranteze goale:</p>
 <div class="code-inline">
  <pre><code>function(){<br>&nbsp;&nbsp;&nbsp;console.log("Salut&nbsp;lume");<br>}()</code></pre>
 </div>
 <p class="paragraph">Aceste paranteze reprezintă aceleași paranteze care sunt folosite la apelul funcției și în care sunt plasate valorile pentru parametrii funcției. Totuși, funcția noastră anonimă nu are parametri, așadar parantezele sunt goale. Adică aici, de fapt, are loc apelul funcției imediat după definirea ei. Și întreaga această construcție este învelită în paranteze.</p>
 <p class="paragraph">În cele din urmă, definim o funcție anonimă și imediat o apelăm.</p>
 <p class="paragraph">Într-un mod similar, putem crea și apela funcții care acceptă parametri:</p>
 <div class="code-inline">
  <pre><code>(function&nbsp;(a,&nbsp;b){<br>&nbsp;&nbsp;&nbsp;const&nbsp;result&nbsp;=&nbsp;a&nbsp;+&nbsp;b;<br>&nbsp;&nbsp;&nbsp;console.log(`${a}&nbsp;+&nbsp;${b}&nbsp;=&nbsp;${result}`);<br>}(4,&nbsp;5));</code></pre>
 </div>
 <p class="paragraph">Aici, funcția acceptă doi parametri, a căror valori sunt adunate, iar rezultatul este afișat la consolă. Și imediat după definirea funcției transmitem parametrilor săi două numere - 4 și 5. Așadar, în timpul executării programului, funcția va fi definită și imediat executată, calculând suma numerelor 4 și 5.</p>
 <h2 class="subtitle">Stil funcțional</h2>
 <p class="paragraph">Închiderile și funcțiile IIFE simplifică scrierea programelor în stil funcțional. Să considerăm următorul exemplu:</p>
 <div class="code-inline">
  <pre><code>console.log(<br>&nbsp;&nbsp;&nbsp;((x,y)&nbsp;=&gt;&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((proc2)&nbsp;=&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((proc1)=&gt;proc1(5,30))((x,y)&nbsp;=&gt;&nbsp;[x,&nbsp;proc2(),&nbsp;y])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;))(()=&gt;x&nbsp;+&nbsp;y)<br>&nbsp;&nbsp;&nbsp;))(10,&nbsp;15)<br>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;[5,&nbsp;25,&nbsp;30]</code></pre>
 </div>
 <p class="paragraph">Să examinăm ce se întâmplă aici. În primul rând, în funcția console.log() se afișează rezultatul unei funcții autoapelative:</p>
 <div class="code-inline">
  <pre><code>((x,y)&nbsp;=&gt;&nbsp;(<br>&nbsp;&nbsp;&nbsp;((proc2)&nbsp;=&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((proc1)=&gt;proc1(5,30))((x,y)&nbsp;=&gt;&nbsp;[x,&nbsp;proc2(),&nbsp;y])<br>&nbsp;&nbsp;&nbsp;))(()=&gt;x&nbsp;+&nbsp;y)<br>))(10,&nbsp;15)</code></pre>
 </div>
 <p class="paragraph">Această primă funcție IIFE primește parametrii x și y, cărora li se transmit numerele 10 și 15.</p>
 <p class="paragraph">Această funcție, la rândul său, utilizează o funcție încorporată și returnează rezultatul acesteia:</p>
 <div class="code-inline">
  <pre><code>((proc2)&nbsp;=&gt;(<br>&nbsp;&nbsp;&nbsp;((proc1)&nbsp;=&gt;&nbsp;proc1(5,30))((x,y)&nbsp;=&gt;&nbsp;[x,&nbsp;proc2(),&nbsp;y])<br>))(()=&gt;x&nbsp;+&nbsp;y)</code></pre>
 </div>
 <p class="paragraph">Aceasta este a doua funcție IIFE. Funcția își ia ca parametru proc2, care este o altă funcție. În acest caz, este funcția ()=&gt;x + y, care returnează suma valorilor. Deoarece pentru funcția încorporată mediul lexical este reprezentat de parametrii x și y ai funcției exterioare, funcția-parametru proc2 primește aceste valori și returnează suma lor - 10 + 15 = 25.</p>
 <p class="paragraph">Totuși, funcția încorporată returnează rezultatul funcției sale încorporate:</p>
 <div class="code-inline">
  <pre><code>((proc1)&nbsp;=&gt;&nbsp;proc1(5,30))((x,y)&nbsp;=&gt;&nbsp;[x,&nbsp;proc2(),&nbsp;y])</code></pre>
 </div>
 <p class="paragraph">Această a treia funcție este, de asemenea, o funcție IIFE. Ca parametru proc1, ea primește de asemenea o anumită funcție de tip callback. În această funcție proc1 sunt transmise numerele 5, 30. Și aici intervine momentul cel mai complex - mai departe, în paranteze, este transmisă chiar funcția proc1:</p>
 <div class="code-inline">
  <pre><code>(x,y)&nbsp;=&gt;&nbsp;[x,&nbsp;proc2(),&nbsp;y]</code></pre>
 </div>
 <p class="paragraph">Aceasta definește parametrii x și y și returnează ca rezultat un array cu trei numere. Mai întâi primul și al treilea număr - x și y. Acești parametri nu trebuie confundați cu parametrii x și y ai primei funcții IIFE de la cel mai înalt nivel:</p>
 <div class="code-inline">
  <pre><code>((x,y)&nbsp;=&gt;&nbsp;(.....))(10,&nbsp;15)</code></pre>
 </div>
 <p class="paragraph">Astfel, cea de-a treia funcție returnează array-ul [x, proc2(), y]. x și y reprezintă parametrii acestei funcții. A doua valoare din array reprezintă rezultatul apelului funcției proc2. Să ne amintim ce funcție este aceasta, și pentru asta să urcăm la nivelul celei de-a doua funcții:</p>
 <div class="code-inline">
  <pre><code>((proc2)&nbsp;=&gt;(<br>&nbsp;&nbsp;&nbsp;.................<br>))(()=&gt;x&nbsp;+&nbsp;y)</code></pre>
 </div>
 <p class="paragraph">proc2 returnează suma valorilor x și y. Pentru această a doua funcție, mediul lexical este definit de prima funcție IIFE, care primește parametrii x și y, astfel încât proc2 primește numerele 10 și 15, deci funcția returnează 25. Prin urmare, rezultatul va fi array-ul [5, 25, 30].</p>
</div>
  </main>
  <aside class="ad-section">
    <div class="ad-box"><p>Google Ad Here</p></div>
    <div class="ad-box"><p>Promo: SQL Beginner Guide</p></div>
  </aside>
</div>
<footer>
  <div class="footer-separator"></div>
  <div class="footer-container">
    <div class="footer-section">
      <h3>Linkuri rapide</h3>
      <ul><li><a th:href="@{/}">Home</a></li><li><a href="javascript:void(0)" onclick="openPopup()">Donează acum</a></li></ul>
    </div>
    <div class="footer-section">
      <h3>Topicuri</h3>
      <ul>
        <li th:each="topic : ${topics}">
          <a th:href="@{'/lessons/topic/' + ${topic.id}}" th:text="${topic.name}">Topic</a>
        </li>
      </ul>
    </div>
    <div class="footer-section">
      <h3>Rețele Sociale</h3>
      <ul>
        <li><a th:href="${platformInfo.tiktokLink}" target="_blank">TikTok</a></li>
        <li><a th:href="${platformInfo.instagramLink}" target="_blank">Instagram</a></li>
        <li><a th:href="${platformInfo.youTubeLink}" target="_blank">YouTube</a></li>
      </ul>
    </div>
    <div class="footer-section contact">
      <h3>Contact</h3>
      <p>Email: <span th:text="${platformInfo.email}">@fabricadecoduri@gmail.com</span></p>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 Fabrica de Coduri. Toate drepturile rezervate.</p>
  </div>
</footer>
<script th:src="@{/js/script.js}"></script>
</body>
</html>